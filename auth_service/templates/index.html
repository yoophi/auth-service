{% extends 'layouts/bootstrap-with-nav.html' %}

{% block title %}index{% endblock %}

{% block styles %}
    {{ super() }}
    <!-- Custom styles for this template -->
    <link href="/static/css/starter-template.css" rel="stylesheet">
{% endblock %}

{% block main %}
    <h1>Home page</h1>
    <div>
        <p><a href={{ url_for('user.register') }}>{%trans%}Register{%endtrans%}</a></p>
        <p><a href={{ url_for('user.login') }}>{%trans%}Sign in{%endtrans%}</a></p>
        <p><a href={{ url_for('main.index') }}>{%trans%}Home Page{%endtrans%}</a> (accessible to anyone)</p>
        <p><a href={{ url_for('main.member_page') }}>{%trans%}Member Page{%endtrans%}</a> (login_required: member@example.com / Password1)</p>
        <p><a href={{ url_for('main.admin_page') }}>{%trans%}Admin Page{%endtrans%}</a> (role_required: admin@example.com / Password1')</p>
        <p><a href={{ url_for('user.logout') }}>{%trans%}Sign out{%endtrans%}</a></p>
    </div>
    <hr />

    {% if current_user %}
        <pre>current_user.id = {{ current_user.id }}</pre>
        <pre>current_user.connections = {{ current_user.connections }}</pre>
    {% endif %}

    <div>

        <h2>Social Login</h2>

        {% macro social_login(provider_id, display_name) %}
            <form action="{{ url_for('social.login', provider_id=provider_id) }}" method="POST">
                <input type="submit" value="Login with {{ display_name }}" />
            </form>
        {% endmacro %}

        {{ social_login('facebook', 'Facebook' )}}
        {{ social_login('google', 'Google' )}}

        <hr />

        {% macro social_connect(provider_id, display_name) %}
            <form action="{{ url_for('social.connect', provider_id=provider_id) }}" method="POST">
                <input type="submit" value="Connect with {{ display_name }}" />
            </form>
        {% endmacro %}

        {{ social_connect('facebook', 'Facebook' )}}
        {{ social_connect('google', 'Google' )}}
    </div>
{% endblock %}
